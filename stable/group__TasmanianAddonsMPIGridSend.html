<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2: MPI Send/Receive/Bcast/Scatter for Sparse Grids</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tasmanian.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
    <div class="doxygen">
            <a href="http://www.doxygen.org/index.html">
                Doxygen
                </a> 1.9.8
    </div>
   <div id="projectname">Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__TasmanianAddonsMPIGridSend.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">MPI Send/Receive/Bcast/Scatter for Sparse Grids<div class="ingroups"><a class="el" href="group__TasmanianAddons.html">Additional Capabilities</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for MPI Send/Receive/Bcast/Scatter for Sparse Grids:</div>
<div class="dyncontent">
<div class="center"><img src="group__TasmanianAddonsMPIGridSend.png" border="0" usemap="#agroup____TasmanianAddonsMPIGridSend" alt=""/></div>
<map name="agroup____TasmanianAddonsMPIGridSend" id="agroup____TasmanianAddonsMPIGridSend">
<area shape="rect" href="group__TasmanianAddons.html" title=" " alt="" coords="5,13,156,38"/>
<area shape="rect" title=" " alt="" coords="204,5,375,45"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga81fed6fbf2fd899aca4922646d2566d1" id="r_ga81fed6fbf2fd899aca4922646d2566d1"><td class="memTemplParams" colspan="2">template&lt;bool binary = TasGrid::mode_binary&gt; </td></tr>
<tr class="memitem:ga81fed6fbf2fd899aca4922646d2566d1"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga81fed6fbf2fd899aca4922646d2566d1">TasGrid::MPIGridSend</a> (<a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> const &amp;grid, int destination, int tag, MPI_Comm comm)</td></tr>
<tr class="memdesc:ga81fed6fbf2fd899aca4922646d2566d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a grid to another process in the MPI comm.  <br /></td></tr>
<tr class="separator:ga81fed6fbf2fd899aca4922646d2566d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5edceb66897460e5b9e104b624877cfc" id="r_ga5edceb66897460e5b9e104b624877cfc"><td class="memTemplParams" colspan="2">template&lt;bool binary = TasGrid::mode_binary&gt; </td></tr>
<tr class="memitem:ga5edceb66897460e5b9e104b624877cfc"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga5edceb66897460e5b9e104b624877cfc">TasGrid::MPIGridRecv</a> (<a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> &amp;grid, int source, int tag, MPI_Comm comm, MPI_Status *status=MPI_STATUS_IGNORE)</td></tr>
<tr class="memdesc:ga5edceb66897460e5b9e104b624877cfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a grid from another process in the MPI comm.  <br /></td></tr>
<tr class="separator:ga5edceb66897460e5b9e104b624877cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9d57c01914cb9fc7b4b4719e242430b" id="r_gab9d57c01914cb9fc7b4b4719e242430b"><td class="memTemplParams" colspan="2">template&lt;bool binary = TasGrid::mode_binary&gt; </td></tr>
<tr class="memitem:gab9d57c01914cb9fc7b4b4719e242430b"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__TasmanianAddonsMPIGridSend.html#gab9d57c01914cb9fc7b4b4719e242430b">TasGrid::MPIGridBcast</a> (<a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> &amp;grid, int root, MPI_Comm comm)</td></tr>
<tr class="memdesc:gab9d57c01914cb9fc7b4b4719e242430b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcast a grid to all processes in an MPI comm.  <br /></td></tr>
<tr class="separator:gab9d57c01914cb9fc7b4b4719e242430b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11ebaf3d88e250fb6a08f8659e8b2a91" id="r_ga11ebaf3d88e250fb6a08f8659e8b2a91"><td class="memTemplParams" colspan="2">template&lt;bool binary = TasGrid::mode_binary&gt; </td></tr>
<tr class="memitem:ga11ebaf3d88e250fb6a08f8659e8b2a91"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga11ebaf3d88e250fb6a08f8659e8b2a91">TasGrid::MPIGridScatterOutputs</a> (<a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> const &amp;source, <a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> &amp;destination, int root, int tag, MPI_Comm comm)</td></tr>
<tr class="memdesc:ga11ebaf3d88e250fb6a08f8659e8b2a91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split the grid across the comm where each rank receives an equal portion of the total outputs.  <br /></td></tr>
<tr class="separator:ga11ebaf3d88e250fb6a08f8659e8b2a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Methods to send/receive <a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html" title="The master-class that represents an instance of a Tasmanian sparse grid.">TasGrid::TasmanianSparseGrid</a> objects. The syntax mimics the raw MPI_Send and MPI_Recv calls, and the templates require Tasmanian_ENABLE_MPI=ON. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga81fed6fbf2fd899aca4922646d2566d1" name="ga81fed6fbf2fd899aca4922646d2566d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81fed6fbf2fd899aca4922646d2566d1">&#9670;&#160;</a></span>MPIGridSend()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool binary = TasGrid::mode_binary&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int TasGrid::MPIGridSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> const &amp;&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a grid to another process in the MPI comm. </p>
<p>Send the grid to the destination rank across an MPI comm. The grid is frist writtein to a stream in either binary or ASCII format and then send with a single MPI_Send() call. Binary results in smaller messages and less computational overhead; thus, ASCII is provided mostly for debugging purposes.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">binary</td><td>defines whether to use binary (<b>true</b>) or ASCII (<b>false</b>) mode. Recommended use with constexpr constant <a class="el" href="group__TasmanianSG.html#gab25913c6e0ddb0f1ef4a70c9c8cddc5b" title="Constant allowing for more expressive selection of ascii and binary mode in IO methods.">TasGrid::mode_binary</a> and <a class="el" href="group__TasmanianSG.html#gade99cdabcb4650a230ac1ef8c9ae1e22" title="Constant allowing for more expressive selection of ascii and binary mode in IO methods.">TasGrid::mode_ascii</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">grid</td><td>is the grid to send. </td></tr>
    <tr><td class="paramname">destination</td><td>is the rank of the recipient MPI process. </td></tr>
    <tr><td class="paramname">tag</td><td>is the tag to use for the MPI message. </td></tr>
    <tr><td class="paramname">comm</td><td>is the MPI comm where the source and destination reside.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the error code of the MPI_Send() command.</dd></dl>
<p><b>Note:</b> this call must be mirrored by <a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga5edceb66897460e5b9e104b624877cfc" title="Receive a grid from another process in the MPI comm.">TasGrid::MPIGridRecv()</a> on the destination process.</p>
<p>Example usage, process 0 creates a grid and sends it to process 1: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> me, tag = 0;</div>
<div class="line">MPI_Comm_rank(MPI_COMM_WORLD, &amp;me);</div>
<div class="line">MPI_Status status;</div>
<div class="line"><a class="code hl_class" href="classTasGrid_1_1TasmanianSparseGrid.html">TasGrid::TasmanianSparseGrid</a> grid;</div>
<div class="line"><span class="keywordflow">if</span> (me == 0) grid.<a class="code hl_function" href="classTasGrid_1_1TasmanianSparseGrid.html#a9790fc9925342d9416dbddb2342637d5">makeGlobalGrid</a>(3, 4, 5, <a class="code hl_enumvalue" href="group__SGEnumerates.html#gga94134756077eff395566c64e6426455fa6feeea3001da5a72dcf3602b9e3cfb0c">TasGrid::type_level</a>, <a class="code hl_enumvalue" href="group__SGEnumerates.html#gga145e27d5ae92acdd5f74149c6d4f2ca2a7979fed9357e95bf01dc3169051f9fcf">TasGrid::rule_clenshawcurtis</a>);</div>
<div class="line"><span class="keywordflow">if</span> (me == 0) <a class="code hl_function" href="group__TasmanianAddonsMPIGridSend.html#ga81fed6fbf2fd899aca4922646d2566d1">MPIGridSend</a>(grid, 1, tag, MPI_COMM_WORLD);</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (me == 1) <a class="code hl_function" href="group__TasmanianAddonsMPIGridSend.html#ga5edceb66897460e5b9e104b624877cfc">MPIGridRecv</a>(grid, 0, tag, MPI_COMM_WORLD, &amp;status);</div>
<div class="line"><span class="comment">// at this line, process 1 has a grid equivalent to that of process 0</span></div>
<div class="line"><span class="comment">// processes with rank 2 and above do nothing, i.e., they have an empty grid</span></div>
<div class="ttc" id="aclassTasGrid_1_1TasmanianSparseGrid_html"><div class="ttname"><a href="classTasGrid_1_1TasmanianSparseGrid.html">TasGrid::TasmanianSparseGrid</a></div><div class="ttdoc">The master-class that represents an instance of a Tasmanian sparse grid.</div><div class="ttdef"><b>Definition</b> TasmanianSparseGrid.hpp:293</div></div>
<div class="ttc" id="aclassTasGrid_1_1TasmanianSparseGrid_html_a9790fc9925342d9416dbddb2342637d5"><div class="ttname"><a href="classTasGrid_1_1TasmanianSparseGrid.html#a9790fc9925342d9416dbddb2342637d5">TasGrid::TasmanianSparseGrid::makeGlobalGrid</a></div><div class="ttdeci">void makeGlobalGrid(int dimensions, int outputs, int depth, TypeDepth type, TypeOneDRule rule, std::vector&lt; int &gt; const &amp;anisotropic_weights, double alpha=0.0, double beta=0.0, const char *custom_filename=nullptr, std::vector&lt; int &gt; const &amp;level_limits=std::vector&lt; int &gt;())</div><div class="ttdoc">Make a Global Grid using Lagrange polynomials with support over the entire domain.</div></div>
<div class="ttc" id="agroup__SGEnumerates_html_gga145e27d5ae92acdd5f74149c6d4f2ca2a7979fed9357e95bf01dc3169051f9fcf"><div class="ttname"><a href="group__SGEnumerates.html#gga145e27d5ae92acdd5f74149c6d4f2ca2a7979fed9357e95bf01dc3169051f9fcf">TasGrid::rule_clenshawcurtis</a></div><div class="ttdeci">@ rule_clenshawcurtis</div><div class="ttdoc">Classic nested rule using Chebyshev nodes with very low Lebesgue constant.</div><div class="ttdef"><b>Definition</b> tsgEnumerates.hpp:289</div></div>
<div class="ttc" id="agroup__SGEnumerates_html_gga94134756077eff395566c64e6426455fa6feeea3001da5a72dcf3602b9e3cfb0c"><div class="ttname"><a href="group__SGEnumerates.html#gga94134756077eff395566c64e6426455fa6feeea3001da5a72dcf3602b9e3cfb0c">TasGrid::type_level</a></div><div class="ttdeci">@ type_level</div><div class="ttdoc">Ignoring the polynomial space, use rules with index .</div><div class="ttdef"><b>Definition</b> tsgEnumerates.hpp:209</div></div>
<div class="ttc" id="agroup__TasmanianAddonsMPIGridSend_html_ga5edceb66897460e5b9e104b624877cfc"><div class="ttname"><a href="group__TasmanianAddonsMPIGridSend.html#ga5edceb66897460e5b9e104b624877cfc">TasGrid::MPIGridRecv</a></div><div class="ttdeci">int MPIGridRecv(TasmanianSparseGrid &amp;grid, int source, int tag, MPI_Comm comm, MPI_Status *status=MPI_STATUS_IGNORE)</div><div class="ttdoc">Receive a grid from another process in the MPI comm.</div><div class="ttdef"><b>Definition</b> tsgMPIScatterGrid.hpp:155</div></div>
<div class="ttc" id="agroup__TasmanianAddonsMPIGridSend_html_ga81fed6fbf2fd899aca4922646d2566d1"><div class="ttname"><a href="group__TasmanianAddonsMPIGridSend.html#ga81fed6fbf2fd899aca4922646d2566d1">TasGrid::MPIGridSend</a></div><div class="ttdeci">int MPIGridSend(TasmanianSparseGrid const &amp;grid, int destination, int tag, MPI_Comm comm)</div><div class="ttdoc">Send a grid to another process in the MPI comm.</div><div class="ttdef"><b>Definition</b> tsgMPIScatterGrid.hpp:127</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga5edceb66897460e5b9e104b624877cfc" name="ga5edceb66897460e5b9e104b624877cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5edceb66897460e5b9e104b624877cfc">&#9670;&#160;</a></span>MPIGridRecv()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool binary = TasGrid::mode_binary&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int TasGrid::MPIGridRecv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> &amp;&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Status *&#160;</td>
          <td class="paramname"><em>status</em> = <code>MPI_STATUS_IGNORE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive a grid from another process in the MPI comm. </p>
<p>Receive a grid that has been send with <a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga81fed6fbf2fd899aca4922646d2566d1" title="Send a grid to another process in the MPI comm.">TasGrid::MPIGridSend()</a>. This call intercepts both messages and compiles them into a sparse grid object.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">binary</td><td>defines whether to use binary (<b>true</b>) or ASCII (<b>false</b>) mode. Recommended use with constexpr constant <a class="el" href="group__TasmanianSG.html#gab25913c6e0ddb0f1ef4a70c9c8cddc5b" title="Constant allowing for more expressive selection of ascii and binary mode in IO methods.">TasGrid::mode_binary</a> and <a class="el" href="group__TasmanianSG.html#gade99cdabcb4650a230ac1ef8c9ae1e22" title="Constant allowing for more expressive selection of ascii and binary mode in IO methods.">TasGrid::mode_ascii</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">grid</td><td>is the output grid, it will be overwritten with grid send by the source rank similar to <a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html#abc8d795d4c836035770fb4aab7d94fac" title="Read the grid from the given filename, automatically detect the format.">TasGrid::TasmanianSparseGrid::read()</a>. </td></tr>
    <tr><td class="paramname">source</td><td>is the rank of the process in the MPI comm that issued the send command. </td></tr>
    <tr><td class="paramname">tag</td><td>is the tag used in the MPI send command. </td></tr>
    <tr><td class="paramname">comm</td><td>is the MPI comm where the source and destination reside. </td></tr>
    <tr><td class="paramname">status</td><td>is the status of the MPI_Recv() command.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the error code of the MPI_Recv() command. </dd></dl>

</div>
</div>
<a id="gab9d57c01914cb9fc7b4b4719e242430b" name="gab9d57c01914cb9fc7b4b4719e242430b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9d57c01914cb9fc7b4b4719e242430b">&#9670;&#160;</a></span>MPIGridBcast()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool binary = TasGrid::mode_binary&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int TasGrid::MPIGridBcast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> &amp;&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broadcast a grid to all processes in an MPI comm. </p>
<p>Make all <b>grid</b> variables for all process in the <b>comm</b> match the grid on the <b>root</b> process. This call uses two MPI_Bcast() calls, the grid size (in memory units) and the actual grid data. The transfer can be done in either binary or ASCII format, but binary results in smaller messages and less computational overhead; thus, ASCII is provided mostly for debugging purposes.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">binary</td><td>defines whether to use binary (<b>true</b>) or ASCII (<b>false</b>) mode. Recommended use with constexpr constant <a class="el" href="group__TasmanianSG.html#gab25913c6e0ddb0f1ef4a70c9c8cddc5b" title="Constant allowing for more expressive selection of ascii and binary mode in IO methods.">TasGrid::mode_binary</a> and <a class="el" href="group__TasmanianSG.html#gade99cdabcb4650a230ac1ef8c9ae1e22" title="Constant allowing for more expressive selection of ascii and binary mode in IO methods.">TasGrid::mode_ascii</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">grid</td><td>is the grid to broadcast across the MPI comm, the grid on the <b>root</b> process will not be modified (i.e., treat as const), in all other cases, the grid will be overwritten similar to the <a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html#abc8d795d4c836035770fb4aab7d94fac" title="Read the grid from the given filename, automatically detect the format.">TasGrid::TasmanianSparseGrid::read()</a>. </td></tr>
    <tr><td class="paramname">root</td><td>is the process that holds the data that needs to be send across. </td></tr>
    <tr><td class="paramname">comm</td><td>is the MPI comm of all process that need to share the grid.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the error code of the fist failed MPI_Bcast() command (corresponding to either the size of the data message), if MPI_SUCCESS is returned then both messages were successful.</dd></dl>
<p>Example usage, process 0 reads a grid from a file and sends it to all processes: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> me;</div>
<div class="line">MPI_Comm_rank(MPI_COMM_WORLD, &amp;me);</div>
<div class="line"><span class="keyword">auto</span> grid = (me == 0) ? <a class="code hl_function" href="group__TasmanianSG.html#ga7e2d073ce7e53d9b995be9550e320eb9">TasGrid::readGrid</a>(<span class="stringliteral">&quot;foo&quot;</span>) : <a class="code hl_class" href="classTasGrid_1_1TasmanianSparseGrid.html">TasGrid::TasmanianSparseGrid</a>();</div>
<div class="line"><a class="code hl_function" href="group__TasmanianAddonsMPIGridSend.html#gab9d57c01914cb9fc7b4b4719e242430b">MPIGridBcast</a>(grid, 0, MPI_COMM_WORLD);</div>
<div class="line"><span class="comment">// at this line, every process has the same grid as if they all read it from &quot;foo&quot;</span></div>
<div class="ttc" id="agroup__TasmanianAddonsMPIGridSend_html_gab9d57c01914cb9fc7b4b4719e242430b"><div class="ttname"><a href="group__TasmanianAddonsMPIGridSend.html#gab9d57c01914cb9fc7b4b4719e242430b">TasGrid::MPIGridBcast</a></div><div class="ttdeci">int MPIGridBcast(TasmanianSparseGrid &amp;grid, int root, MPI_Comm comm)</div><div class="ttdoc">Broadcast a grid to all processes in an MPI comm.</div><div class="ttdef"><b>Definition</b> tsgMPIScatterGrid.hpp:211</div></div>
<div class="ttc" id="agroup__TasmanianSG_html_ga7e2d073ce7e53d9b995be9550e320eb9"><div class="ttname"><a href="group__TasmanianSG.html#ga7e2d073ce7e53d9b995be9550e320eb9">TasGrid::readGrid</a></div><div class="ttdeci">TasmanianSparseGrid readGrid(const char *filename)</div><div class="ttdoc">Factory method, creates a new grid and calls TasmanianSparseGrid::read().</div><div class="ttdef"><b>Definition</b> TasmanianSparseGrid.hpp:2357</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga11ebaf3d88e250fb6a08f8659e8b2a91" name="ga11ebaf3d88e250fb6a08f8659e8b2a91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11ebaf3d88e250fb6a08f8659e8b2a91">&#9670;&#160;</a></span>MPIGridScatterOutputs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;bool binary = TasGrid::mode_binary&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int TasGrid::MPIGridScatterOutputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> const &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTasGrid_1_1TasmanianSparseGrid.html">TasmanianSparseGrid</a> &amp;&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Comm&#160;</td>
          <td class="paramname"><em>comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Split the grid across the comm where each rank receives an equal portion of the total outputs. </p>
<p>Split the grid across the ranks in the comm so that each rank receives a grid with the same type, rule, points, etc., but with a subset of the total outputs. The distribution is as close to even as possible, if there are less outputs than ranks, some ranks will receive an empty grid.</p>
<p><b>Note:</b> this does not use MPI_Scatter(), instead it makes multiple calls to <a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga81fed6fbf2fd899aca4922646d2566d1" title="Send a grid to another process in the MPI comm.">MPIGridSend()</a> and <a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga5edceb66897460e5b9e104b624877cfc" title="Receive a grid from another process in the MPI comm.">MPIGridRecv()</a>.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">binary</td><td>defines whether to use binary (<b>true</b>) or ASCII (<b>false</b>) mode, see <a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga81fed6fbf2fd899aca4922646d2566d1" title="Send a grid to another process in the MPI comm.">TasGrid::MPIGridSend()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>grid located on the <b>root</b> rank is the grid to be distributed across, for all other ranks the source will not be referenced. </td></tr>
    <tr><td class="paramname">destination</td><td>is the grid where the local portion of the scatter will be stored, the existing grid will be overwritten. If the <b>source</b> outputs are less than the number of <b>comm</b> ranks, then some of the destination grids will be empty. </td></tr>
    <tr><td class="paramname">root</td><td>is the rank that will hold the source sparse grid. </td></tr>
    <tr><td class="paramname">tag</td><td>same as in <a class="el" href="group__TasmanianAddonsMPIGridSend.html#ga81fed6fbf2fd899aca4922646d2566d1" title="Send a grid to another process in the MPI comm.">TasGrid::MPIGridSend()</a>. </td></tr>
    <tr><td class="paramname">comm</td><td>is the MPI comm of all process that need to share a portion of the grid.</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage, rank 0 creates a large grid and scatters is across comm: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> me;</div>
<div class="line">MPI_Comm_rank(MPI_COMM_WORLD, &amp;me);</div>
<div class="line"><span class="keyword">auto</span> source = (me == 0) ? <a class="code hl_function" href="group__TasmanianSG.html#ga7e2d073ce7e53d9b995be9550e320eb9">TasGrid::readGrid</a>(<span class="stringliteral">&quot;grid_with_many_outputs&quot;</span>) : <a class="code hl_class" href="classTasGrid_1_1TasmanianSparseGrid.html">TasGrid::TasmanianSparseGrid</a>();</div>
<div class="line"><a class="code hl_class" href="classTasGrid_1_1TasmanianSparseGrid.html">TasGrid::TasmanianSparseGrid</a> grid;</div>
<div class="line"><a class="code hl_function" href="group__TasmanianAddonsMPIGridSend.html#ga11ebaf3d88e250fb6a08f8659e8b2a91">MPIGridScatterOutputs</a>(source, grid, 0, 1, 2, comm);</div>
<div class="line"><span class="comment">// at this line, every process has a portion of the source at grid</span></div>
<div class="line"><span class="comment">// if the comm has 3 ranks,</span></div>
<div class="line"><span class="comment">// then 7 outputs will be split into 3 2 2</span></div>
<div class="line"><span class="comment">// and 2 outputs will become 1 1 empty</span></div>
<div class="ttc" id="agroup__TasmanianAddonsMPIGridSend_html_ga11ebaf3d88e250fb6a08f8659e8b2a91"><div class="ttname"><a href="group__TasmanianAddonsMPIGridSend.html#ga11ebaf3d88e250fb6a08f8659e8b2a91">TasGrid::MPIGridScatterOutputs</a></div><div class="ttdeci">int MPIGridScatterOutputs(TasmanianSparseGrid const &amp;source, TasmanianSparseGrid &amp;destination, int root, int tag, MPI_Comm comm)</div><div class="ttdoc">Split the grid across the comm where each rank receives an equal portion of the total outputs.</div><div class="ttdef"><b>Definition</b> tsgMPIScatterGrid.hpp:276</div></div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<!-- <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div> -->
</body>
</html>
