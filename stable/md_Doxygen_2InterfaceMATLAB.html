<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2: MATLAB/Octave Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tasmanian.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
    <div class="doxygen">
            <a href="http://www.doxygen.org/index.html">
                Doxygen
                </a> 1.9.8
    </div>
   <div id="projectname">Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_Doxygen_2InterfaceMATLAB.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">MATLAB/Octave Interface</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md41"></a> The Matlab or Octave interface to <b>tasgrid</b> consists of several functions that call various <b>tasgrid</b> commands and read and write matrix files. Unlike most Matlab interfaces, this is code does not use .mex files, but rather system commands and text files. In a nut shell, Matlab <b>tsgMakeXYZ</b> functions take a user specified name and create a Matlab object and a file generated by <b>tasgrid</b> option <b>-gridfile</b> (or <b>TasmanianSparseGrid::write()</b> function). The Matlab object is used to reference the specific grid file and is needed by most other functions. Here are some notes to keep in mind:</p>
<ul>
<li>The interface requires that Matlab is able to call external commands, specifically the <b>tasgrid</b> executable.</li>
<li>The interface also requires access to a folder where the files can be written.</li>
<li>The Matlab work folder option in CMake allows you to automatically specify where the temporary files will be stored. The <em>make matlab</em> target in the GNU make engine sets the work folder in a sub-folder of the Tasmanian source directory. In either case, the default folder can be changed by manually editing <b>tsgGetPaths.m</b>.</li>
<li>Each grid has a user specified name, that is a string which gets pre-pended at the beginning of the file name.</li>
<li>Any Tasmanian grid file can be loaded into a MATLAB object using the <b>c</b> function</li>
<li>The <b>tsgDeleteGrid()</b>, <b>tsgDeleteGridByName()</b> and <b>tsgListGridsByName()</b> functions allow for cleaning the files in the temporary folder.</li>
<li>Every Tasmanian-Matlab function corresponds to one <b>tasgrid</b> command.</li>
<li>Every function comes with help comments that can be accessed by typing <div class="fragment"><div class="line">help tsgFunctionName</div>
</div><!-- fragment --></li>
<li>Note that it is recommended to add the folder with the Tasmanian interface to the Matlab path, otherwise the <b>addpath()</b> command has to be called after every restart.</li>
<li>All input variables follow naming convention where the first character specifies the type of the variable:<ul>
<li><b>i</b> stands for integer</li>
<li><b>s</b> stands for string</li>
<li><b>f</b> stands for real number</li>
<li><b>l</b> stands for list</li>
<li><b>v</b> stands for vector, i.e., row or column matrix</li>
<li><b>m</b> stands for matrix, i.e., two dimensional array</li>
</ul>
</li>
<li>See the notes about the Fortran 2003 interface regarding the row-major matrix format</li>
</ul>
<h2><a class="anchor" id="autotoc_md42"></a>
List of Matlab functions and corresponding C++ API</h2>
<div class="fragment"><div class="line">tsgCancelRefine.m                     -&gt;  clearRefinement()/finishConstruction()</div>
<div class="line">tsgEstimateAnisotropicCoefficients.m  -&gt;  estimateAnisotropicCoefficients()</div>
<div class="line">tsgEvaluateHierarchy.m                -&gt;  evaluateHierarchicalFunctions()</div>
<div class="line">tsgEvaluate.m                         -&gt;  evaluateBatch()</div>
<div class="line">tsgGetCandidateConstructionAnisotropic.m</div>
<div class="line">tsgGetCandidateConstructionSurplus.m  -&gt; getCandidateConstructionPoints()</div>
<div class="line">tsgGetHCoefficients.m                 -&gt;  getHierarchicalCoefficients()</div>
<div class="line">tsgGetInterpolationWeights.m          -&gt;  getInterpolationWeights()</div>
<div class="line">tsgGetNeededPoints.m                  -&gt;  getNeededPoints()</div>
<div class="line">tsgGetPoints.m                        -&gt;  getPoints()</div>
<div class="line">tsgGetPolynomialSpaces.m              -&gt;  getGlobalPolynomialSpace()</div>
<div class="line">tsgGetQuadrature.m                    -&gt;  getQuadratureWeights()/getPoints()</div>
<div class="line">tsgIntegrate.m                        -&gt;  integrate()</div>
<div class="line">tsgLoadHCoefficients.m                -&gt;  setHierarchicalCoefficients()</div>
<div class="line">tsgLoadConstructedPoints.m            -&gt;  loadConstructedPoints()</div>
<div class="line">tsgLoadValues.m                       -&gt;  loadNeededValues()</div>
<div class="line">tsgMakeFourier.m                      -&gt;  makeFourierGrid()</div>
<div class="line">tsgMakeGlobal.m                       -&gt;  makeGlobalGrid()</div>
<div class="line">tsgMakeLocalPolynomial.m              -&gt;  makeLocalPolynomialGrid()</div>
<div class="line">tsgMakeQuadrature.m                   -&gt;  (see tasgrid -makequadrature)</div>
<div class="line">tsgMakeSequence.m                     -&gt;  makeSequenceGrid()</div>
<div class="line">tsgMakeWavelet.m                      -&gt;  makeWaveletGrid()</div>
<div class="line">tsgMergeRefine.m                      -&gt;  mergeRefinement()</div>
<div class="line">tsgRefineAnisotropic.m                -&gt;  setAnisotropicRefinement()</div>
<div class="line">tsgRefineSurplus.m                    -&gt;  setSurplusRefinement()</div>
<div class="line">tsgSummary.m                          -&gt;  printStats()</div>
</div><!-- fragment --><p>The Matlab functions wrap around <b>tasgrid</b>, thus what applies to one applies to the other. See the <b>tasgrid</b> notes about the order of complex Fourier coefficients and make quadrature.</p>
<h2><a class="anchor" id="autotoc_md43"></a>
Function tsgCoreTests()</h2>
<div class="fragment"><div class="line">tsgCoreTests()</div>
</div><!-- fragment --><p>Performs a series of tests of the Matlab interface. If some tests are failing, the installation is incomplete or corrupted.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
Function tsgGetPaths()</h2>
<div class="fragment"><div class="line">[ sFiles, sTasGrid ] = tsgGetPaths()</div>
</div><!-- fragment --><p>This function returns two strings:</p>
<ul>
<li><b>sTasGrid</b> is a string containing the path to the <b>tasgrid</b> executable (including the name of the executable).</li>
<li><b>sFiles</b> is the path to a folder where Matlab has read/write permission. Files will be created and deleted in this folder.</li>
</ul>
<h2><a class="anchor" id="autotoc_md45"></a>
Function tsgReadMatrix() and tsgWriteMatrix()</h2>
<p>Those functions are used internally to read from or write to matrix files. Those functions should not be called directly.</p>
<h2><a class="anchor" id="autotoc_md46"></a>
Function tsgCleanTempFiles()</h2>
<p>Those functions are used internally to clean the temporary files.</p>
<h2><a class="anchor" id="autotoc_md47"></a>
Function tsgListGridsByName()</h2>
<p>Scans the work folder and lists the existing grids regardless whether those are currently associated with Matlab objects. The names can be used for calls to <b>tsgDeleteGridByName()</b> and <b>tsgReloadGrid()</b>.</p>
<h2><a class="anchor" id="autotoc_md48"></a>
Function tsgLoadGridFromFile()</h2>
<p>Takes an existing filename created with any of the Tasmanian interfaces and loads it into an object. The object still needs a unique name for the temporary files, but the file can be anywhere in the system and only needs read/write permissions. Many methods, e.g., <b>tsgEvaluate()</b> do not modify the file and work with just read permissions. Note that writing to the file from two interfaces at the same time will likely cause file corruption, simultaneous regarding and writing will probably crash, concurrent reads will work. </p><div class="fragment"><div class="line">lGrid = tsgReloadGrid( &lt;name&gt;, &lt;filename&gt; )</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md49"></a>
Function tsgDeleteGrid()/tsgDeleteGridByName()</h2>
<p>Deleting the Matlab object doesn't remove the files from the work folder, thus <b>tsgDeleteGrid()</b> has to be explicitly called to remove the files associated with the grid. If the Matlab object has been lost (i.e., cleared by accident), then the grid files can be deleted by specifying just the name for <b>tsgDeleteGridByName()</b>, see also <b>tsgListGridsByName()</b>.</p>
<ul>
<li><b>WARNING</b> the <b>tsgDeleteGrid()</b> method will delete the file used in <b>tsgLoadGridFromFile()</b>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md50"></a>
Function tsgReloadGrid()</h2>
<p>Creates a new Matlab object file for a grid with existing files in the work folder. This function can restore access to a grid if the grid object has been lost. This function can also create aliases between two grids which can be dangerous, see the section about avoiding problems. This function can also be used to gain access to a file generated by <b>tasgrid -gridfile</b> option or <b>TasmanianSparseGrid::write()</b> function, just generate the file, move it to the work folder, rename it to <code>&lt;name&gt;_FileG</code>, and call </p><div class="fragment"><div class="line">lGrid = tsgReloadGrid( &lt;name&gt; )</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md51"></a>
Function tsgCopyGrid()</h2>
<p>Creates a duplicate of an existing grid, this function creates a new Matlab object and a new grid file in the work folder.</p>
<h2><a class="anchor" id="autotoc_md52"></a>
Function tsgWriteCustomRuleFile()</h2>
<p>Writes a file with a custom quadrature or interpolation rule, see the Custom Rule File Format section.</p>
<h2><a class="anchor" id="autotoc_md53"></a>
Function tsgExample()</h2>
<div class="fragment"><div class="line">tsgExample()</div>
</div><!-- fragment --><p>This function contains sample code that mimics the C++ examples and serves as a demonstration on the proper way to call the Matlab functions.</p>
<h2><a class="anchor" id="autotoc_md54"></a>
GPU acceleration</h2>
<div class="fragment"><div class="line">lGrid = tsgMakeLocalPolynomial( ... )</div>
<div class="line">lGrid.gpuDevice = 0;</div>
<div class="line">result = tsgEvaluate(lGrid, ...)</div>
</div><!-- fragment --><p>If the <b>lGrid</b> object has a <b>gpuDevice</b> field, then the corresponding GPU will be used for the evaluations. Run <b>tsgCoreTest()</b> to see a list of detected CUDA devices.</p>
<h2><a class="anchor" id="autotoc_md55"></a>
Saving a Grid</h2>
<p>You can save the <b>lGrid</b> object just like any other Matlab object. However, a saved grid has two components, the <b>lGrid</b> object and the files associated with the grid that are stored in the folder specified by <b>tsgGetPath()</b>. The files in the temporary folder will be persistent until either <b>tsgDeleteGrid()</b> is called or the files are manually deleted. The only exception is that the <b>tsgExample()</b> function will overwrite any grids with names starting with <code>_tsgExample1</code> through <code>_tsgExample10</code>. Note that modifying <b>tsgGetPath()</b> may result in the code not being able to find the needed files and hence the grid object may be invalidated.</p>
<h2><a class="anchor" id="autotoc_md56"></a>
Avoiding Some Problems</h2>
<ul>
<li>Make sure to call <b>tsgDeleteGrid()</b> as soon as you are done with a grid, this will avoid clutter in the temporary folder.</li>
<li>If you clear an <b>lGrid</b> object without calling <b>tsgDeleteGrid()</b> (i.e., you exit Matlab without saving), then make sure to use <b>tsgListGridsByName()</b> and <b>tsgDeleteGridByName()</b> to safely delete the <em>lost</em> grids.</li>
<li>Working with the Matlab interface is very similar to working with dynamical memory, where the data is stored on the disk as opposed to the RAM and the <b>lGrid</b> object is the pointer. Also, the grids are associated by name as opposed to a memory address.</li>
<li>If multiple users are sharing the same temporary folder, then it would be useful if they come up with a naming convention that prevents two users from using the same grid name. For example, instead of both users creating a grid named <em>mygrid1</em>, the users should name their grids <em>johngrid1</em> and <em>janegrid1</em>.</li>
<li>All of the grid data for all of the grids is stored in the same folder. Anyone with access to the temporary folder has full access to all of the sparse grid data.</li>
<li>If two users have separate copies of <b>tsgGetPaths()</b>, then they can use separate storage folders without any of the multi-user considerations. This is true even if all other files are shared, including the <b>tasgrid</b> executable and Tasmanian libraries. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<!-- <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div> -->
</body>
</html>
