<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2 (development): Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tasmanian.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
    <div class="doxygen">
            <a href="http://www.doxygen.org/index.html">
                Doxygen
                </a> 1.9.1
    </div>
   <div id="projectname">Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2 (development)
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_Doxygen_Installation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#autotoc_md11">Document Sections</a></li>
<li class="level2"><a href="#autotoc_md12">Requirements</a></li>
<li class="level2"><a href="#autotoc_md13">Install using CMake: the preferred way</a></li>
<li class="level2"><a href="#autotoc_md14">Install with (basic) GNU Make</a></li>
<li class="level2"><a href="#autotoc_md15">Install with Python Pip</a></li>
<li class="level2"><a href="#autotoc_md16">Install with Spack</a></li>
<li class="level2"><a href="#autotoc_md17">Install on MS Windows platform</a></li>
<li class="level2"><a href="#autotoc_md18">Install on Mac platform</a></li>
<li class="level2"><a href="#autotoc_md19">Install folder structure</a></li>
<li class="level2"><a href="#autotoc_md20">Linking to Tasmanian: CMake Package Config</a></li>
<li class="level2"><a href="#autotoc_md21">Known Issues</a></li>
</ul>
</ul>
</div>
<div class="textblock"><h2><a class="anchor" id="autotoc_md11"></a>
Document Sections</h2>
<ul>
<li>Requirements</li>
<li>Install using CMake: the preferred way</li>
<li>Install with (basic) GNU Make</li>
<li>Install with Python Pip</li>
<li>Install with Spack</li>
<li>Install on MS Windows platform</li>
<li>Install folder structure</li>
<li>Linking to Tasmanian: CMake Package Config</li>
<li>Known issues</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
Requirements</h2>
<p>Minimum requirements to use Tasmanian:</p><ul>
<li>a C/C++ compiler and either <a href="https://cmake.org/">CMake</a> or <a href="https://www.gnu.org/software/make/">GNU Make</a> build engines.</li>
</ul>
<p>Recommended additional features:</p><ul>
<li><a href="https://www.python.org/">Python</a> with with <a href="http://www.numpy.org/">NumPy</a> 1.10 (or newer) and <a href="https://docs.python.org/3/library/ctypes.html">CTypes</a> packages</li>
<li><a href="https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms">Basic Linear Algebra Subroutine (BLAS)</a> implementation</li>
<li><a href="http://www.netlib.org/lapack/">Linear Algebra PACKage</a> implementation</li>
<li><a href="https://en.wikipedia.org/wiki/OpenMP">OpenMP</a> implementation (usually included with the compiler)</li>
</ul>
<p>Optional features:</p><ul>
<li>Acceleration using <a href="https://www.openmp.org/">OpenMP</a> multicore algorithms (CPU only), the OpenMP standard is supported on most major compilers.</li>
<li>Acceleration using Nvidia <a href="https://developer.nvidia.com/cublas">linear algebra libraries</a> and custom <a href="https://developer.nvidia.com/cuda-zone">CUDA kernels</a></li>
<li>Acceleration using AMD ROCm <a href="https://rocsparse.readthedocs.io/en/master/">linear algebra libraries</a> and custom <a href="https://rocmdocs.amd.com/en/latest/ROCm_API_References/HIP-API.html">HIP kernels</a></li>
<li>Acceleration using Intel OneAPI <a href="https://software.intel.com/content/www/us/en/develop/tools/oneapi/components/onemkl.html">oneMKL</a> and custom <a href="https://software.intel.com/content/www/us/en/develop/tools/oneapi.html">SYCL kernels</a></li>
<li>GPU out-of-core algorithms using the <a href="http://icl.cs.utk.edu/magma/">UTK MAGMA library</a></li>
<li>Basic <a href="https://matplotlib.org/">Python matplotlib</a> support</li>
<li>Fully featured <a href="https://www.gnu.org/software/octave/">MATLAB/Octave</a> interface via wrappers around the command-line tool</li>
<li>Fortran 2003 interface using <a href="https://gcc.gnu.org/wiki/GFortran">gfortran</a>, <a href="https://flang.llvm.org/docs/">flang</a>, <a href="https://software.intel.com/en-us/intel-compilers">ifort</a>, <a href="https://www.pgroup.com/index.htm">pgfortran</a>, <a href="https://www.ibm.com/products/xl-fortran-linux-compiler-power">xlf2003</a></li>
<li>Addon templates for the <a href="https://en.wikipedia.org/wiki/Message_Passing_Interface">Message Passing Interface (MPI)</a></li>
<li><a href="http://www.doxygen.org/">Doxygen</a> documentation</li>
</ul>
<p><b>Note:</b> with the exception of the MAGMA library and some of the more exotic compilers, the rest of the software is included in most Linux distributions (or HomeBrew) or there are vendor supported software repositories.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Tested versions   </th><th class="markdownTableHeadNone">Recommended    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gcc   </td><td class="markdownTableBodyNone">11 - 13   </td><td class="markdownTableBodyNone">any    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">clang   </td><td class="markdownTableBodyNone">14 - 18   </td><td class="markdownTableBodyNone">any    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">cmake   </td><td class="markdownTableBodyNone">3.19 - 3.25   </td><td class="markdownTableBodyNone">3.22    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">python   </td><td class="markdownTableBodyNone">3.10 - 3.12   </td><td class="markdownTableBodyNone">any    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">anaconda   </td><td class="markdownTableBodyNone">5.3   </td><td class="markdownTableBodyNone">5.3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OpenBlas   </td><td class="markdownTableBodyNone">0.2.18 - 3.08   </td><td class="markdownTableBodyNone">any    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESSL   </td><td class="markdownTableBodyNone">6.2   </td><td class="markdownTableBodyNone">6.2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CUDA   </td><td class="markdownTableBodyNone">11.8 - 12.6   </td><td class="markdownTableBodyNone">avoid 12.3-12.4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ROCm   </td><td class="markdownTableBodyNone">5.7 - 6.2   </td><td class="markdownTableBodyNone">any    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DPC++   </td><td class="markdownTableBodyNone">2024.2   </td><td class="markdownTableBodyNone">2024    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">libiomp   </td><td class="markdownTableBodyNone">5.0   </td><td class="markdownTableBodyNone">5.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MAGMA   </td><td class="markdownTableBodyNone">2.5.1 - 2.6.1   </td><td class="markdownTableBodyNone">2.6.1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Doxygen   </td><td class="markdownTableBodyNone">1.8.13   </td><td class="markdownTableBodyNone">1.8.13    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MPI   </td><td class="markdownTableBodyNone">2.1, 3.1   </td><td class="markdownTableBodyNone">3.1   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md13"></a>
Install using CMake: the preferred way</h2>
<p>The preferred way to install Tasmanian is to use the included CMake build script, which requires CMake version 3.19, ROCm capabilities require CMake 3.21.</p>
<ul>
<li>The commands for an out-of-source CMake build: <div class="fragment"><div class="line">mkdir Build</div>
<div class="line">cd Build</div>
<div class="line">cmake &lt;options&gt; &lt;path-to-Tasmanian-source&gt;</div>
<div class="line">make</div>
<div class="line">make test</div>
<div class="line">make install</div>
<div class="line">make test_install</div>
</div><!-- fragment --></li>
<li>Standard CMake options are accepted: <div class="fragment"><div class="line">-D CMAKE_INSTALL_PREFIX:PATH=&lt;install-prefix&gt; (install folder for the make install command)</div>
<div class="line">-D CMAKE_BUILD_TYPE:STRING=&lt;Debug/Release&gt;    (set debug flags or default optimization flags)</div>
<div class="line">-D BUILD_SHARED_LIBS:BOOL=&lt;ON/OFF&gt;            (pick shared or static libs)</div>
<div class="line">-D CMAKE_CXX_COMPILER:PATH=&lt;path&gt;             (specify the C++ compiler, or HIP/ROCm compiler)</div>
<div class="line">-D CMAKE_CUDA_COMPILER:PATH=&lt;path&gt;            (specify the CUDA nvcc compiler)</div>
<div class="line">-D CMAKE_CXX_FLAGS:STING=&lt;flags&gt;              (set additional flags)</div>
</div><!-- fragment --></li>
<li>List of Tasmanian specific CMake options (all default to <b>OFF</b>): <div class="fragment"><div class="line">-D Tasmanian_ENABLE_OPENMP:BOOL=&lt;ON/OFF&gt;      (recommended)</div>
<div class="line">-D Tasmanian_ENABLE_BLAS:BOOL=&lt;ON/OFF&gt;        (recommended)</div>
<div class="line">-D Tasmanian_ENABLE_PYTHON:BOOL=&lt;ON/OFF&gt;      (recommended)</div>
<div class="line">-D Tasmanian_ENABLE_RECOMMENDED:BOOL=&lt;ON/OFF&gt; (enable the above and the -O3 flag)</div>
<div class="line">-D Tasmanian_ENABLE_CUDA:BOOL=&lt;ON/OFF&gt;        (stable)</div>
<div class="line">-D Tasmanian_ENABLE_HIP:BOOL=&lt;ON/OFF&gt;         (stable)</div>
<div class="line">-D Tasmanian_ENABLE_DPCPP:BOOL=&lt;ON/OFF&gt;       (stable)</div>
<div class="line">-D Tasmanian_ENABLE_MAGMA:BOOL=&lt;ON/OFF&gt;       (stable)</div>
<div class="line">-D Tasmanian_MATLAB_WORK_FOLDER:PATH=&quot;&quot;       (stable)</div>
<div class="line">-D Tasmanian_ENABLE_DOXYGEN:BOOL=&lt;ON/OFF&gt;     (stable)</div>
<div class="line">-D Tasmanian_ENABLE_FORTRAN:BOOL=&lt;ON/OFF&gt;     (stable)</div>
<div class="line">-D Tasmanian_ENABLE_MPI:BOOL=&lt;ON/OFF&gt;         (stable)</div>
</div><!-- fragment --></li>
<li>Acceleration options:<ul>
<li>OpenMP allows Tasmanian to use more than one CPU core, which greatly increases the performance. While many of the Tasmanian algorithms have been parallelized, the buildin C++ algorithms are usually sequential. This is most notable in the case of <code>std::sort</code> but affects others as well. Some compilers support parallel standard algorithms but those in turn reuqire additional compiler flags.<ul>
<li>for GCC add <code>-D_GLIBCXX_PARALLEL</code> to the <code>CMAKE_CXX_FLAGS</code></li>
</ul>
</li>
<li>Basic Linear Algebra Subroutines (BLAS) is a standard with many implementations, e.g., <a href="https://www.openblas.net/">https://www.openblas.net/</a>; optimized BLAS improves the performance when using evaluate commands on grids with many points or working with models with many outputs</li>
<li>Linear Algebra PACKage (LAPACK) is a set of advanced solver, eigen-solvers and decomposition methods that build upon BLAS and is usually included in the same package, e.g., OpenBLAS, MKL and ESSL; within Tasmanian, the name BLAS in CMake or run-time options indicate the dependence and usage of both BLAS and LAPACK</li>
<li>CUDA is a C++ language extension that allows Tasmanian to leverage the computing power of Nvidia GPU devices, which greatly enhances the performance of <code>evaluateFast()</code> and <code>evaluateBatch()</code> and a few other calls</li>
<li>HIP/ROCm is very similar to CUDA but uses AMD GPU devices instead, Tasmanian supports a HIP backend</li>
<li>SYCL/DPC++/OneAPI is the Intel alternative to CUDA and HIP, Tasmanian supports a SYCL/DPC++ backend</li>
<li>Matrix Algebra on GPU and Multicore Architectures (MAGMA) is a library for GPU accelerated linear algebra developed at the University of Tennessee at Knoxville</li>
<li>MPI allows the use of distributed memory in Bayesian inference, parallel surrogate model construction, and send/receive grid through an MPI communicators</li>
</ul>
</li>
<li>The <b>Tasmanian_ENABLE_RECOMMENDED</b> option searches for OpenMP, BLAS, and Python, enables the options (if possible) and also sets the <code>-O3</code> flag</li>
<li><b>Tasmanian_ENABLE_FORTRAN</b> enables the Fortran 2003 interface<ul>
<li>Fortran 90 interface is deprecated, but can be enabled with <b>-DTasmanian_ENABLE_FORTRAN90=ON</b></li>
</ul>
</li>
<li>Additional interfaces are available, beyond the default C/C++ library and the command line tools:<ul>
<li>Python and Fortran require appropriate interpreter and compiler</li>
<li>The MATLAB/Octave interface requires a work-folder with read/write permission for temporary files. The interface is enabled by setting <b>Tasmanian_MATLAB_WORK_FOLDER</b> to a valid read/write location.</li>
</ul>
</li>
<li>The Doxygen option will build the HTML documentation</li>
<li>Options to adjust the testing environment: by default Tasmanian testing will use the system provided OpenMP parameters and run tests on all visible GPU devices; specific number of threads and device can be selected (note that only the testing environment is affected): <div class="fragment"><div class="line">-D Tasmanian_TESTS_OMP_NUM_THREADS=&lt;number-of-threads-for-testing&gt; (only used with OpenMP)</div>
<div class="line">-D Tasmanian_TESTS_GPU_ID=&lt;cuda-device-id-for-testing&gt;             (only used with CUDA)</div>
</div><!-- fragment --></li>
<li>Additional commands to guide the CMake <code>find_package()</code> modules: <div class="fragment"><div class="line">-D Python_EXECUTABLE:PATH            (specify the Python interpreter)</div>
<div class="line">-D CMAKE_CUDA_COMPILER:PATH          (specify the CUDA nvcc compiler)</div>
<div class="line">-D Tasmanian_ENABLE_ROCM:PATH        (specify the search path for HIP)</div>
<div class="line">-D CMAKE_Fortran_COMPILER:PATH       (specify the Fortran compiler)</div>
<div class="line">-D MKLROOT:PATH                      (specify the path to the oneMKL installation)</div>
<div class="line">-D Tasmanian_MAGMA_ROOT:PATH         (specify the path to the MAGMA installation)</div>
<div class="line">-D MPI_CXX_COMPILER:PATH=&lt;path&gt;      (specify the MPI compiler wrapper)</div>
<div class="line">-D MPI_Fortran_COMPILER:PATH=&lt;path&gt;  (needed for MPI with Fortran)</div>
<div class="line">-D MPIEXEC_EXECUTABLE:PATH=&lt;path&gt;    (needed for MPI testing)</div>
</div><!-- fragment --></li>
<li>The MAGMA option can be passed without the <em>Tasmanian_</em> prefix and if not specified explicitly, it will be read from the OS environment.</li>
<li>Option for automated download of MAGMA, the package will be downloaded, build, and installed together with Tasmanian in the same prefix. <div class="fragment"><div class="line">-D Tasmanian_MAGMA_DOWNLOAD:BOOL=&lt;ON/OFF&gt; (works only on Linux)</div>
</div><!-- fragment --></li>
<li>The <b>ROCm</b> capabilities <b>NO LONGER</b> require the CMake CXX compiler to be set to <em>hipcc</em>.<ul>
<li>by default, Tasmanian will search for hip in <code>/opt/rocm /opt/rocm/hip</code> following the <a href="https://rocmdocs.amd.com/en/latest/Installation_Guide/Using-CMake-with-AMD-ROCm.html">ROCm documentation</a></li>
<li>additional search paths can be added using <code>CMAKE_PREFIX_PATH</code></li>
<li>the CXX compiler, if not set automatically, should be set to ROCm clang, e.g., <code>/opt/rocm/llvm/bin/clang++</code></li>
<li>if <code>Tasmanian_ENABLE_ROCM</code> is defined and set to a directory, it will be added to <code>CMAKE_PREFIX_PATH</code> to search for <code>roc::hip</code></li>
</ul>
</li>
<li>The <b>OneAPI</b> capabilities require:<ul>
<li>the compiler has to be set to Intel <em>ipcx</em>, Tasmanian will automatically add the <em>-fsycl</em> flag (when needed)</li>
<li><code>Tasmanian_ENABLE_BLAS</code> is set to <b>ON</b></li>
<li>BLAS is set to the CPU version of MKL, e.g., using <code>BLAS_LIBRARIES</code> or <code>BLA_VENDOR</code> or <code>MKLROOT</code> environment variable</li>
</ul>
</li>
<li>Alternatives allowing to directly specify libraries and bypass <code>find_package()</code> altogether: <div class="fragment"><div class="line">-D BLAS_LIBRARIES</div>
<div class="line">-D LAPACK_LIBRARIES</div>
</div><!-- fragment --></li>
<li>Extra options are available in case CMake fails to find a required dependency, e.g., <code>find_package()</code> sometimes fails to acknowledge that the ACML implementation of BLAS depends on both <code>libgfortran</code> and <code>libgomp</code>; the manual options below should not be necessary in the majority of cases: <div class="fragment"><div class="line">-D Tasmanian_EXTRA_LIBRARIES:LIST     (add more libraries as dependencies)</div>
<div class="line">-D Tasmanian_EXTRA_INCLUDE_DIRS:PATH  (add more include paths to search for headers)</div>
<div class="line">-D Tasmanian_EXTRA_LINK_DIRS:PATH     (appends more link paths to search for libraries)</div>
</div><!-- fragment --></li>
<li>Options helpful to Tasmanian developers: <div class="fragment"><div class="line">-D DOXYGEN_INTERNAL_DOCS=YES  (include the documentation of the Tasmanian internals)</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Install with (basic) GNU Make</h2>
<p>The core capabilities of Tasmanian can be build with a few simple GNU Make commands. The basic build engine is useful for quick testing and exploring Tasmanian, or if CMake is unavailable or unwanted. Acceleration options other than OpenMP are not supported in the basic mode, CMake is so common these days that it should be the default way to install.</p>
<ul>
<li>Using GNU Make with <code>g++</code> and optionally <code>/usr/bin/env python</code> <div class="fragment"><div class="line">make</div>
<div class="line">make test     (will fail if /usr/bin/env python is missing the numpy or ctypes modules)</div>
<div class="line">make matlab   (optional: sets matlab work folder to ./tsgMatlabWorkFolder/)</div>
<div class="line">make examples</div>
<div class="line">make clean</div>
</div><!-- fragment --> In the basic mode, the source folder will become the installation folder, i.e., the libraries, executables and Python modules will be build in the source folder and the headers will be copied to the <code>include</code> sub-folder.</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Install with Python Pip</h2>
<p>Tasmanian is included in the Python Pip index: <a href="https://pypi.org/project/Tasmanian/">https://pypi.org/project/Tasmanian/</a> </p><div class="fragment"><div class="line">python3 -m pip install Tasmanian --user   (user installation)</div>
<div class="line">python3 -m pip install Tasmanian          (virtual env installation)</div>
</div><!-- fragment --><p>The Tasmanian module is not a regular Python-only project but a wrapper around the C++ libraries, note the following:</p><ul>
<li>The compiled binaries are cached by pip and <code>--no-cache-dir</code> option must be used to change the options.</li>
<li>Only user installations are supported, installation for all users is possible with CMake but not Pip.</li>
<li>Python virtual environments are supported, as well as Linux, Mac and Windows operating systems.</li>
<li>By default, Tasmanian will install with <code>Tasmanian_ENABLE_RECOMMENDED=ON</code> which will safe-auto-enable BLAS and OpenMP<ul>
<li>environment variable (see below) can be used to disable the recommended options and switch to manual enable/disable</li>
</ul>
</li>
<li>The Pip installer will accept Tasmanian options specified in the environment variables: <div class="fragment"><div class="line">Environment Option will translate to               CMake Options</div>
<div class="line">export Tasmanian_ENABLE_RECOMMENDED=OFF            -D Tasmanian_ENABLE_RECOMMENDED=OFF</div>
<div class="line"> </div>
<div class="line">export Tasmanian_ENABLE_BLAS=&lt;blas-lapack-libs&gt;    -D Tasmanian_ENABLE_BLAS=ON</div>
<div class="line">                                                   -D BLAS_LIBRARIES=&lt;blas-lapack-libs&gt;</div>
<div class="line">                                                   -D LAPACK_LIBRARIES=&lt;blas-lapack-libs&gt;</div>
<div class="line">export Tasmanian_ENABLE_CUDA=&lt;cuda-nvcc&gt;           -D Tasmanian_ENABLE_CUDA=ON</div>
<div class="line">                                                   -D CMAKE_CUDA_COMPILER=&lt;cuda-nvcc&gt;</div>
<div class="line">export Tasmanian_ENABLE_DPCPP=&lt;dpcpp&gt;              -D Tasmanian_ENABLE_DPCPP=ON</div>
<div class="line">                                                   -D CMAKE_CXX_COMPILER=&lt;dpcpp&gt;</div>
<div class="line">export Tasmanian_ENABLE_MAGMA=&lt;magma-root&gt;         -D Tasmanian_ENABLE_MAGMA=ON</div>
<div class="line">                                                   -D Tasmanian_MAGMA_ROOT_DIR=&lt;magma-root&gt;</div>
<div class="line">export Tasmanian_ENABLE_MPI=&lt;mpicxx&gt;               -D Tasmanian_ENABLE_MPI=ON</div>
<div class="line">                                                   -D MPI_CXX_COMPILER=&lt;mpicxx&gt;</div>
<div class="line">export Tasmanian_MATLAB_WORK_FOLDER=&lt;path&gt;         -D Tasmanian_MATLAB_WORK_FOLDER=&lt;path&gt;</div>
</div><!-- fragment --></li>
<li>CMake also accepts several standard environment variables: <div class="fragment"><div class="line">Environment Option          Example values</div>
<div class="line">export BLA_VENDOR           OpenBLAS or MKL</div>
<div class="line">export MKLROOT              /opt/intel/oneapi/mkl/latest</div>
</div><!-- fragment --></li>
<li>note that the Tasmanian specific environment variables work only with Python Pip</li>
<li>Example virtual install looks like this: <div class="fragment"><div class="line">python3 -m venv tasmanian_virtual_env                   # create a virtual environment</div>
<div class="line">source ./tasmanian_virtual_env/bin/activate             # activate the virtual environment</div>
<div class="line">export Tasmanian_ENABLE_CUDA=/usr/local/cuda/bin/nvcc   # specify the CUDA compiler</div>
<div class="line">python -m pip install Tasmanian --no-cache-dir          # will install Tasmanian with CUDA</div>
<div class="line">python -m Tasmanian                                     # print the install log</div>
<div class="line">tasgrid -v                                              # print the available CUDA devices</div>
</div><!-- fragment --></li>
</ul>
<p>Additional notes:</p><ul>
<li>under MS Windows the environment variables can be set from Advanced System Settings, but the paths should use Linux style of back-slashes, e.g., <code>C:/Program Files/CUDA/bin/nvcc.exe</code></li>
<li>scikit build sometimes lags in support for the latest MS Visual Studio, regular CMake install works fine</li>
<li>under OSX some users have reported segfaults when using a pip install, the problem does not appear when using CMake, the issue is under investigation</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
Install with Spack</h2>
<p>Tasmanian is also included in Spack: <a href="https://spack.io/">https://spack.io/</a> </p><div class="fragment"><div class="line">spack install tasmanian+openmp+blas+cuda+magma+python+fortran</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md17"></a>
Install on MS Windows platform</h2>
<p>Tasmanian has been tested with MS Visual Studio 2019.</p>
<ul>
<li>First use the CMake GUI to set the folders and options</li>
<li>Then use the command prompt (<code>cmd.exe</code>) to enter the build folder <div class="fragment"><div class="line">cd &lt;cmake-build-folder&gt;</div>
<div class="line">cmake --build . --config Release</div>
<div class="line">ctest -C Release</div>
<div class="line">cmake --build . --config Release --target install</div>
</div><!-- fragment --></li>
<li>Both Debug and Release are supported config modes, but do not use them simultaneously, pick only one Release or Debug.</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Install on Mac platform</h2>
<p>As of Tasmanian 8.1, the Mac OSX installation handles the same as Linux regardless for both Intel and M-chips.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Install folder structure</h2>
<p>Tasmanian follows standard Linux conventions, the install path could be set to <code>/usr/local/</code>, although it is recommended to install in a location inside the user home folder to avoid potential system-wide conflicts.</p>
<ul>
<li>Install folder structure: <div class="fragment"><div class="line">&lt;install-path&gt;/bin/                       (tagrid executable tool)</div>
<div class="line">&lt;install-path&gt;/lib/                       (shared or static libraries)</div>
<div class="line">&lt;install-path&gt;/lib/Tasmanian/             (cmake package-config files)</div>
<div class="line">&lt;install-path&gt;/lib/pythonX.Y/             (python module)</div>
<div class="line">&lt;install-path&gt;/include/                   (headers .h and .hpp, and Fortran .mod)</div>
<div class="line">&lt;install-path&gt;/share/Tasmanian            (bash env scripts, install log, table)</div>
<div class="line">&lt;install-path&gt;/share/Tasmanian/examples/  (reference examples)</div>
<div class="line">&lt;install-path&gt;/share/Tasmanian/matlab/    (matlab scripts)</div>
<div class="line">&lt;install-path&gt;/share/Tasmanian/python/    (copy of &lt;install-path&gt;/lib/pythonX.Y)</div>
<div class="line">&lt;install-path&gt;/share/Tasmanian/testing/   (a CMake script for post-install testing)</div>
</div><!-- fragment --></li>
</ul>
<p>Additional notes:</p><ul>
<li>A summary of all compile options is stored in <div class="fragment"><div class="line">&lt;install-path&gt;/share/Tasmanian/Tasmanian.log</div>
</div><!-- fragment --></li>
<li>The log file can be displayed with wither command: <div class="fragment"><div class="line">&lt;install-path&gt;/bin/tasgrid -log  (using the command line tool)</div>
<div class="line">python -m Tasmanian              (only if Python is enabled)</div>
</div><!-- fragment --></li>
<li>The executable and library paths, as well as the Python path can be set in <code>bash</code> by sourcing <div class="fragment"><div class="line">source &lt;install-path&gt;/share/Tasmanian/TasmanianENVsetup.sh</div>
</div><!-- fragment --></li>
<li>When using pip, the python module location may be different depending on the OS and the Python virtual environment.</li>
<li>The Python module is version independent, i.e., the files work with all tested Python versions; the <code>share/Tasmanian/python</code> copy allows for easy and version independent access to the Tasmanian modules.</li>
<li>Under MS Windows the shared libraries (e.g., the .dll files) are installed in <code>bin</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
Linking to Tasmanian: CMake Package Config</h2>
<p>Tasmanian will install CMake package-config files in <code>&lt;install-path&gt;/lib/Tasmanian</code>, the files will contain all necessary information to import the Tasmanian targets into other CMake projects using the CMake command: </p><div class="fragment"><div class="line">find_package(Tasmanian 8.1 PATHS &quot;&lt;install-path&gt;&quot;)</div>
</div><!-- fragment --><p> See the included <code>CMakeLists.txt</code> in <code>&lt;install-path&gt;/share/Tasmanian/examples</code>.</p>
<p>Note that the <code>PATHS</code> do not have to be specified explicitly if the <code>TasmanianENVsetup.sh</code> is sourced or if the <code>Tasmanian_ROOT</code> environment variable is set. The correct <code>find_package()</code> command is displayed in the log (see the previous section).</p>
<p>The imported targets will be named: </p><div class="fragment"><div class="line">Tasmanian::Tasmanian  (links to the C++ libraries)</div>
<div class="line">Tasmanian::tasgrid    (imported executable pointing to the command line tool)</div>
<div class="line">Tasmanian::Fortran    (links to the C++ libraries and the Fortran wrappers)</div>
</div><!-- fragment --><p>In addition, the following variables will be set: </p><div class="fragment"><div class="line">Tasmanian_PYTHONPATH         (path to the Python module, if Python was enabled)</div>
<div class="line">Tasmanian_MATLAB_WORK_FOLDER (path to the MATLAB work folder, if set during build)</div>
<div class="line">Tasmanian_MATLABPATH         (path to the MATLAB scripts, if MATLAB was enabled)</div>
<div class="line">Tasmanian_&lt;component&gt;_FOUND  (set to ON for each available component)</div>
</div><!-- fragment --><p> The possible components are: </p><div class="fragment"><div class="line">SHARED STATIC OPENMP BLAS CUDA HIP DPCPP MAGMA MPI PYTHON MATLAB FORTRAN</div>
</div><!-- fragment --><p> The modules correspond to shared and static libraries and the cmake options used during build.</p>
<p>All available components will be included even if the component is not explicitly requested. Requesting components can help catch errors early in the build process and/or print useful log messages. For example: </p><div class="fragment"><div class="line">find_package(Tasmanian 8.1 REQUIRED SHARED PYTHON CUDA OPTIONAL_COMPONENTS OPENMP)</div>
</div><!-- fragment --><p> In the above example:</p><ul>
<li>an error will be generated if Tasmanian was build with static libraries, no CUDA or no Python support</li>
<li>a status message will report whether Tasmanian was build with OpenMP support</li>
<li>requesting incompatible components will always fail, e.g., CUDA with ROCM or SHARED and STATIC</li>
</ul>
<h2><a class="anchor" id="autotoc_md21"></a>
Known Issues</h2>
<p>Several known issues and work-around fixes:</p><ul>
<li>Apple OSX has poor support for OpenMP, especially when using M-chips (apple silicon)<ul>
<li>OpenMP is not supported by the default compiler (xcode)</li>
<li>gcc with OpenMP support can be installed through Homebrew, but the performance gains from multi-threading are low</li>
</ul>
</li>
<li>the automated MAGMA download reports the wrong GPU architecture enabled<ul>
<li>ignore the MAGMA message the build correctly respects <code>CMAKE_CUDA_ARCHITECTURES</code></li>
</ul>
</li>
<li>The addon tests sometime fail due to thread scheduling<ul>
<li>The overhead associated with thread scheduling is much larger than the simple test models used, which leads to unrealistically large fluctuations in sample run-time, which in turn leads to randomness in the results, most notably on machines with few cpu cores.</li>
<li>Rerun the tests and/or installation to see if the problem is persistent</li>
</ul>
</li>
<li>Mixing the GCC and Clang compilers and linkers sometimes fails with an error about the architecture<ul>
<li>use shared libraries only, i.e., <code>-D BUILD_SHARED_LIBS=ON</code> in CMake</li>
</ul>
</li>
<li>Some older versions of the PGI compiler fails when using optimization <code>-O2</code><ul>
<li>use the <code>-O1</code> instead, or the newest version of the compiler</li>
</ul>
</li>
<li>CUDA 12.3 and 12.4 seem to have a bug in cuSparse<ul>
<li>whenever possible, avoid those versions of CUDA </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<!-- <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div> -->
</body>
</html>
