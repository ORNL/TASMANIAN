<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2 (development): Custom Rule File Format</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tasmanian.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
    <div class="doxygen">
            <a href="http://www.doxygen.org/index.html">
                Doxygen
                </a> 1.9.1
    </div>
   <div id="projectname">Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2 (development)
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_Doxygen_CustomRuleFileFormat.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Custom Rule File Format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The custom rule functionality allows the creation of a sparse grid using a rule other than the ones implemented in the code. The custom rule is defined via a file with tables that list the levels, number of points per level, exactness of the quadrature at each level, points and their associated weights. Currently, the custom rules work only with global grids and hence the interpolant associated with the rule is a global interpolant using Lagrange polynomials.</p>
<p>The custom rule is defined via custom rule file, with the following format:</p>
<ul>
<li><b>line 1:</b> should begin with the string <b>description:</b> and it should be followed by a string with a short description of the rule. This string is used only for human readability purposes.</li>
<li><b>line 2:</b> should begin with the string <b>levels:</b> followed by an integer indicating the total number of rule levels defined in the file.</li>
</ul>
<p>After the description and total number of levels have been defined, the file should contain a sequence of integers describing the number of points and exactness, followed by a sequence of floating point numbers listing the points and weights.</p>
<ul>
<li><b>integers:</b> is a sequence of integer pairs where the first integer indicates the number of points for the current level and the second integer indicates the exactness of the rule. For example, the first 3 levels of the Gauss-Legendre rule will be described via the sequence (1, 1 , 2 , 3 , 3 , 5), while the first 3 levels of the Clenshaw-Curtis rule will be described via (1 , 1 , 3 , 3 , 5 , 5).</li>
<li><b>floats:</b> is a sequence of floating point pairs describing the weights and points. The first number of the pair is the quadrature weight, while the second number if the abscissa. The points associated with the first level are listed in the first pairs. The second set of pairs lists the points associated with the second level and so on.</li>
</ul>
<p>Here is an example of Gauss-Legendre 3 level rule for reference purposes: </p><div class="fragment"><div class="line">description: Gauss-Legendre rule</div>
<div class="line">levels: 3</div>
<div class="line">1 1 2 3 3 5</div>
<div class="line">2.0 0.0</div>
<div class="line">1.0 -0.5774 1.0 0.5774</div>
<div class="line">0.5556 -0.7746 0.8889 0.0 0.5556 0.7746</div>
</div><!-- fragment --><p>Similarly, a level 3 Clenshaw-Curtis rule can be defined as </p><div class="fragment"><div class="line">description: Clenshaw-Curtis rule</div>
<div class="line">levels: 3</div>
<div class="line">1 1 3 3 5 5</div>
<div class="line">2.0 0.0</div>
<div class="line">0.333 1.0 1.333 0.0 0.333 -1.0</div>
<div class="line">0.8 0.0 0.067 -1.0 0.067 1.0 0.533 -0.707 0.533 0.707</div>
</div><!-- fragment --><p>Several notes on the custom rule file format:</p><ul>
<li>Tasmanian works with double precision and hence a custom rule should be defined with the corresponding number of significant digits. The examples above are for illustrative purposes only.</li>
<li>The order of points within each level is irrelevant. Tasmanian will internally index the points.</li>
<li>Points that are within distance of <em>1.E-12</em> of each other will be treated as the same point. Thus, repeated (nested) points can be automatically handled by the code. The tolerance can be adjusted in <b><a class="el" href="tsgMathUtils_8hpp.html" title="Math functions and constants.">tsgMathUtils.hpp</a></b> by modifying the <b>num_tol</b> constant,</li>
<li>Naturally, Tasmanian cannot create a sparse grid that requires a one dimensional rule with level higher than what is provided in the file. Predicting the required number of levels can be hard in the case of anisotropic grids, the code will raise a <code>std::runtime_error</code> if the custom rule does not provide a sufficient number of points.</li>
<li>The exactness constants are used only if <b>qptotal</b> or <b>qpcurved</b> types are used and the indexes of the polynomial space, i.e., <b>getPolynomialIndexes()</b>. If quadrature rules are not used, then the exactness integers can be set to 0.</li>
<li>The quadrature weights are used only if integration is performed. If no quadrature or integration is used, then the weights can all be set to 0.</li>
<li>If a custom rule is used together with <b>setDomainTransform()</b>, then the transform will assume that the rule is defined on the canonical interval <code>[-1,1]</code>. A custom rule can be defined on any arbitrary interval, however, for any interval different from <code>[-1,1]</code> the <b>setDomainTransform()</b> functions should not be used.</li>
<li>Tasmanian comes with an example custom rule file that defines 9 levels of the Gauss-Legendre-Patterson rule, a.k.a., nested Gauss-Legendre rule. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<!-- <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div> -->
</body>
</html>
