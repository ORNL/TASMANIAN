<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2: TasGrid::HandleDeleter&lt; ehandle &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="tasmanian.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
    <div class="doxygen">
            <a href="http://www.doxygen.org/index.html">
                Doxygen
                </a> 1.9.8
    </div>
   <div id="projectname">Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN: Tasmanian v8.2
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('structTasGrid_1_1HandleDeleter.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structTasGrid_1_1HandleDeleter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TasGrid::HandleDeleter&lt; ehandle &gt; Struct Template Reference<div class="ingroups"><a class="el" href="group__TasmanianSG.html">Sparse Grids</a> &raquo; <a class="el" href="group__TasmanianAcceleration.html">Classes and functions used for acceleration methods</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Deleter template for the GPU handles, e.g., cuBlas and rocBlas.  
 <a href="structTasGrid_1_1HandleDeleter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="tsgAcceleratedHandles_8hpp_source.html">tsgAcceleratedHandles.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5d732fea59ebf34b8af9256ada679f32" id="r_a5d732fea59ebf34b8af9256ada679f32"><td class="memItemLeft" align="right" valign="top"><a id="a5d732fea59ebf34b8af9256ada679f32" name="a5d732fea59ebf34b8af9256ada679f32"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>HandleDeleter</b> (bool init_own=true)</td></tr>
<tr class="memdesc:a5d732fea59ebf34b8af9256ada679f32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor indicating the ownership of the handle. <br /></td></tr>
<tr class="separator:a5d732fea59ebf34b8af9256ada679f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd1ab7ad2c19c93166ccf77b9dbe826" id="r_aecd1ab7ad2c19c93166ccf77b9dbe826"><td class="memItemLeft" align="right" valign="top"><a id="aecd1ab7ad2c19c93166ccf77b9dbe826" name="aecd1ab7ad2c19c93166ccf77b9dbe826"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>operator()</b> (int *p) const</td></tr>
<tr class="memdesc:aecd1ab7ad2c19c93166ccf77b9dbe826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the handle, if owned; nothing otherwise. <br /></td></tr>
<tr class="separator:aecd1ab7ad2c19c93166ccf77b9dbe826"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a27d569a233268c88f50c480376bcd3dc" id="r_a27d569a233268c88f50c480376bcd3dc"><td class="memItemLeft" align="right" valign="top"><a id="a27d569a233268c88f50c480376bcd3dc" name="a27d569a233268c88f50c480376bcd3dc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>own</b></td></tr>
<tr class="memdesc:a27d569a233268c88f50c480376bcd3dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the own/not own state. <br /></td></tr>
<tr class="separator:a27d569a233268c88f50c480376bcd3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename ehandle&gt;<br />
struct TasGrid::HandleDeleter&lt; ehandle &gt;</div><p>Deleter template for the GPU handles, e.g., cuBlas and rocBlas. </p>
<p>The deleter is used in conjunction with std::unique_ptr to provide both type-safety and RAII resource management for the opaque pointer handles for TPL such as cuBlas and rocBlas. The delete operation is defined in the corresponding TPL file. The deleter is initialized with ownership flag which is indicated whether the associated handle should or should not be deleted, e.g., whether the handle was created internally or handed down by the user.</p>
<p>Effectively, the deleter with init_own set to false will turn the associated std::unique_ptr into a non-owning container. The positive side of this approach include:</p><ul>
<li>the rest of the code can refer to a single unique_ptr, e.g., this bundles the ownership flag into the object</li>
<li>the rest of the code can utilize all properties of std::unique_ptr, e.g., automatically initializing and creating/deleting the proper copy and move constructor and assignment operators</li>
<li>the C++ code outside of the <a class="el" href="group__TasmanianAcceleration.html#gaf7fc50157cfb3edd7fa9bd3bee442e85" title="Deletes the handle, specialized for each TPL backend and tag in TasGrid::AccHandle namepace.">TasGrid::deleteHandle()</a> specializations looks like modern C++</li>
</ul>
<p>The negative side of the above is that a non-owning std::unique_ptr is unexpected and violates the spirit of the container, and possibly the whole point of the container. However, this hack is necessitated by the mix of C-style of memory management for cuBlas/rocBlas handles together with the C++ code. The alternative to this hack is to follow a C-style of code throughout and keeping separate variables to indicate ownership, manually deleting constructors, manually implementing move semantics, and losing C++ abstraction and automation. The loss of abstraction would be obvious to a causal reader, but the code will be prone to all problems that come without RAII regardless of how diligent or how familiar with Tasmanian a contributor may be. Therefore, this deleter is implemented to allow the use of std::unique_ptr in either owning or non-owning mode. </p>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li>SparseGrids/<a class="el" href="tsgAcceleratedHandles_8hpp_source.html">tsgAcceleratedHandles.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<!-- <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--  <ul>
    <li class="navelem"><a class="el" href="namespaceTasGrid.html">TasGrid</a></li><li class="navelem"><a class="el" href="structTasGrid_1_1HandleDeleter.html">HandleDeleter</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div> -->
</body>
</html>
